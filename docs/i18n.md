# calmui i18n（feature: `i18n`）

## 启用方式

在 app 的 `Cargo.toml` 中启用 `calmui` 的 `i18n` feature：

```toml
calmui = { git = "https://github.com/AldenClark/calmui.git", features = ["i18n"] }
```

## 固定翻译文件路径

默认读取：`<app_root>/calmui/i18n.toml`

构建时会自动编译到二进制里；如果文件不存在会直接报错，避免线上漏翻译。

## 文件格式

```toml
default_locale = "en-US"

[locales.check_notice]
"en-US" = "Check now"
"zh-CN" = "现在检查"

[locales.pig]
"en-US" = "pig"
"zh-CN" = "猪"
```

- `default_locale` 表示默认语言，用于系统语言无法匹配时的兜底 locale。  
- `locales.<translation_key>` 下写各语言文本。  
- 语言 tag 固定为 BCP-47 风格（如 `en-US`、`zh-CN`），构建时会做校验与规范化。  
- 缺当前语言的翻译时会直接显示 key（不回退到 `default_locale` 文本）。

## 运行时访问

```rust
use calmui::CalmProvider;

let i18n = CalmProvider::i18n(cx);
i18n.set_locale("zh-CN");
let text = i18n.t("common.confirm");
let text_with_args = i18n.t_with("demo.greeting", &[("name", "Ethan")]);
```

## 可选覆盖（特殊构建场景）

- `CALMUI_I18N_TOML`: 指向翻译 toml 的完整路径。  
- `CALMUI_I18N_APP_ROOT`: 指定 app 根目录（会拼接 `calmui/i18n.toml`）。
